# SPDX-License-Identifier: Apache-2.0
#
# Mini-Bootloader Configuration
# Goal: Minimal footprint (~8KB) - flash driver only, no BLE
#
# Optimized Flash Layout (nRF52833 512KB):
#   0x00000 - 0x02000: Mini-Bootloader (8KB max)
#   0x02000 - 0x3F000: Slot A - Primary firmware (244KB)
#   0x3F000 - 0x7C000: Slot B - Secondary firmware (244KB)
#   0x7C000 - 0x7D000: Boot Control Block (4KB)
#   0x7D000 - 0x7E000: OTA State (4KB)
#   0x7E000 - 0x80000: Settings/NVS (8KB)

# =============================================================================
# Core Configuration - Minimal
# =============================================================================
CONFIG_MULTITHREADING=n
CONFIG_MAIN_STACK_SIZE=1024
CONFIG_SYS_CLOCK_EXISTS=n

# Minimal C library
CONFIG_MINIMAL_LIBC=y
CONFIG_PICOLIBC=n
CONFIG_NEWLIB_LIBC=n

# No floating point needed
CONFIG_FPU=n

# =============================================================================
# Size Optimization - Maximum
# =============================================================================
CONFIG_SIZE_OPTIMIZATIONS=y
CONFIG_SPEED_OPTIMIZATIONS=n

# Disable features we don't need
CONFIG_BOOT_BANNER=n
CONFIG_PRINTK=n
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
CONFIG_SERIAL=n
CONFIG_GPIO=n
CONFIG_I2C=n
CONFIG_SPI=n
CONFIG_SENSOR=n
CONFIG_DISPLAY=n
CONFIG_PWM=n
CONFIG_ADC=n
CONFIG_BT=n
CONFIG_NETWORKING=n
CONFIG_FILE_SYSTEM=n
CONFIG_SETTINGS=n
CONFIG_NVS=n

# Disable debug/logging
CONFIG_LOG=n
CONFIG_DEBUG=n
CONFIG_ASSERT=n
CONFIG_THREAD_MONITOR=n
CONFIG_THREAD_NAME=n

# =============================================================================
# Flash Driver - Required for Boot Control Block
# =============================================================================
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_SOC_FLASH_NRF=y

# No flash map or partitions - we handle addresses directly
CONFIG_FLASH_MAP=n

# =============================================================================
# CRC - Required for boot control block validation
# =============================================================================
CONFIG_CRC=y

# =============================================================================
# Memory Configuration
# =============================================================================
CONFIG_HEAP_MEM_POOL_SIZE=0
CONFIG_ERRNO=n
CONFIG_POSIX_API=n

# =============================================================================
# ARM Configuration
# =============================================================================
# We need to relocate vector table before jumping
CONFIG_CODE_DATA_RELOCATION=n
